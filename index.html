<!DOCTYPE html><html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ‰“æ“Šç´€éŒ„</title>
  <style>
    html, body {
  margin: 0;
  padding: 0;
  background-color: #121212;
  color: white;
  font-family: sans-serif;
  height: 100%;
  width: 100%;
  overflow-x: hidden;
  overflow-y: auto;
}main {

display: flex; flex-direction: row; flex-wrap: wrap; align-items: flex-start; gap: 10px; padding: 10px; }

#canvas-area {
  flex: 5;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #1e1e1e;
  overflow: hidden;
}

#field-bg, #hitCanvas {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: contain;
}

#popup {
  position: absolute;
  right: 20px;
  top: 20px;
  background: #1e1e1e;
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
  border-radius: 8px;
  padding: 8px;
  z-index: 10;
}

#popup button:last-child {
  background: #ff2e7a;
  color: white;
}

.btn-light {
  padding: 12px 18px;
  margin: 6px;
  font-size: 16px;
  border-radius: 6px;
  border: 1px solid #444;
  background: #1e1e1e;
  color: white;
  transition: 0.2s;
}

.btn-light:hover {
  background-color: #2196f3;
  color: white;
}

.btn-light.selected {
  background: #ff2e7a;
  color: white;
  font-weight: bold;
}

#controls {
  flex: 3;
  display: flex;
  flex-direction: column;
  background-color: #1e1e1e;
  padding: 10px;
  box-sizing: border-box;
  overflow: hidden;
}

#controls h4 {
  color: #ff2e7a;
  margin: 0 0 10px 0;
}

#log-area {
  flex: 1;
  overflow-y: auto;
  background: #2c2c2c;
  padding: 10px;
  border-radius: 6px;
}

#atbat-popup {
  display: none;
  position: fixed;
  right: 20px;
  bottom: 20px;
  width: 90vw;
  max-width: 500px;
  max-height: 60vh;
  overflow-y: auto;
  background: #1e1e1e;
  border: 2px solid #2196f3;
  border-radius: 10px;
  z-index: 9999;
  padding: 10px;
}

@media screen and (orientation: portrait) { body::before { content: 'è«‹å°‡è£ç½®è½‰ç‚ºæ©«å¼ä»¥é€²è¡Œæ“ä½œ'; display: flex; align-items: center; justify-content: center; position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 99999; background: #121212; color: #fff; font-size: 20px; padding: 20px; text-align: center; } main, #canvas-area, #controls, #popup, #atbat-popup { display: none !important; } } </style>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2196f3">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
  <main>
    <div id="canvas-area">
      <img src="https://cdn.ttv.com.tw/manasystem/FileData/News/1ee242e9-56c7-4851-a39e-66789603f1db.jpg" id="field-bg">
      <canvas id="hitCanvas" width="900" height="500"></canvas>
      <div id="popup">
        <button class="btn-light" onclick="selectResult('å®‰æ‰“')">å®‰æ‰“</button>
        <button class="btn-light" onclick="selectResult('æ¥æ®º')">æ¥æ®º</button>
        <button class="btn-light" onclick="clearCanvas()">é‡ç•«</button>
      </div>
    </div>
    <div id="controls">
      <h4>æ‰“æ“Šç´€éŒ„</h4>
      <div id="log-area"></div>
    </div>
  </main>  <div id="atbat-popup">
    <div style="display:flex; flex-wrap:wrap; gap:10px;">
      <div style="flex:1; min-width:140px;">
        <strong>æ‰“é»æ•¸</strong><br>
        <button class="btn-light" onclick="setAtbat('æ‰“é»', 0, this)">0</button>
        <button class="btn-light" onclick="setAtbat('æ‰“é»', 1, this)">1</button>
        <button class="btn-light" onclick="setAtbat('æ‰“é»', 2, this)">2</button>
        <button class="btn-light" onclick="setAtbat('æ‰“é»', 3, this)">3</button>
      </div>
      <div style="flex:1; min-width:140px;">
        <strong>ä¸Šåˆ°å“ªå£˜</strong><br>
        <button class="btn-light" onclick="setAtbat('å£˜åŒ…', 'ä¸€', this)">ä¸€</button>
        <button class="btn-light" onclick="setAtbat('å£˜åŒ…', 'äºŒ', this)">äºŒ</button>
        <button class="btn-light" onclick="setAtbat('å£˜åŒ…', 'ä¸‰', this)">ä¸‰</button>
        <button class="btn-light" onclick="setAtbat('å£˜åŒ…', 'æœ¬', this)">æœ¬</button>
        <button class="btn-light" onclick="setAtbat('å£˜åŒ…', 'å‡ºå±€', this)">å‡ºå±€</button>
      </div>
      <div style="flex:1; min-width:140px;">
        <strong>ç›œå£˜</strong><br>
        <button class="btn-light" onclick="setAtbat('ç›œå£˜', 'ç„¡', this)">ç„¡</button>
        <button class="btn-light" onclick="setAtbat('ç›œå£˜', 'æˆåŠŸ1', this)">æˆåŠŸ1</button>
        <button class="btn-light" onclick="setAtbat('ç›œå£˜', 'æˆåŠŸ2', this)">æˆåŠŸ2</button>
        <button class="btn-light" onclick="setAtbat('ç›œå£˜', 'å¤±æ•—', this)">å¤±æ•—</button>
      </div>
      <div style="flex:1; min-width:140px;">
        <strong>å‡ºå±€æ•¸</strong><br>
        <button class="btn-light" onclick="setAtbat('å‡ºå±€æ•¸', 0, this)">0</button>
        <button class="btn-light" onclick="setAtbat('å‡ºå±€æ•¸', 1, this)">1</button>
        <button class="btn-light" onclick="setAtbat('å‡ºå±€æ•¸', 2, this)">2</button>
      </div>
      <div style="flex:1; min-width:140px;">
        <strong>æ˜¯å¦å¾—åˆ†</strong><br>
        <button class="btn-light" onclick="setAtbat('å¾—åˆ†', 'æ˜¯', this)">âœ” æœ‰</button>
        <button class="btn-light" onclick="setAtbat('å¾—åˆ†', 'å¦', this)">âœ˜ æ²’æœ‰</button>
      </div>
    </div>
    <div style="text-align:right; margin-top:10px;">
      <button onclick="saveAtbatData()" style="background:#2196f3;color:white;padding:5px 10px;border:none;border-radius:5px;">âœ… å„²å­˜ç´€éŒ„</button>
      <button onclick="closeAtbatPopup()" style="background:#444;color:white;padding:5px 10px;border:none;border-radius:5px;">ğŸ”„ å–æ¶ˆ</button>
    </div>
  </div>  <script>
    const atbatHistory = [];
    let atbatData = {};

    function setAtbat(type, value, el) {
      atbatData[type] = value;
      if (el) {
        const group = Array.from(el.parentElement.querySelectorAll('button'));
        group.forEach(btn => btn.classList.remove('selected'));
        el.classList.add('selected');
      }
    }

    function saveAtbatData() {
      atbatHistory.push({ ...atbatData });
      updateHistoryTable();
      clearCanvas();
      atbatData = {};
      document.querySelectorAll('#atbat-popup .btn-light').forEach(btn => btn.classList.remove('selected'));
      document.getElementById('atbat-popup').style.display = 'none';
    }

    function closeAtbatPopup() {
      document.getElementById('atbat-popup').style.display = 'none';
    }

    function selectResult(result) {
      document.getElementById('atbat-popup').style.display = 'block';
    }

    function clearCanvas() {
      const canvas = document.getElementById('hitCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      document.getElementById('popup').style.display = 'block';
    }

    function updateHistoryTable() {
      const log = document.getElementById('log-area');
      log.innerHTML = '';
      atbatHistory.forEach((record, index) => {
        const text = `${index + 1}ï½œæ‰“é»ï¼š${record['æ‰“é»'] ?? '-'}ï¼Œå£˜åŒ…ï¼š${record['å£˜åŒ…'] ?? '-'}ï¼Œç›œå£˜ï¼š${record['ç›œå£˜'] ?? '-'}ï¼Œå‡ºå±€æ•¸ï¼š${record['å‡ºå±€æ•¸'] ?? '-'}ï¼Œå¾—åˆ†ï¼š${record['å¾—åˆ†'] ?? '-'}`;
        const entry = document.createElement('div');
        entry.textContent = text;
        entry.style.borderBottom = '1px solid #444';
        entry.style.padding = '4px 0';
        log.prepend(entry);
      });
    }

    const canvas = document.getElementById('hitCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    canvas.addEventListener('pointerdown', (e) => {
      const rect = canvas.getBoundingClientRect();
      ctx.beginPath();
      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
      drawing = true;
    });

    canvas.addEventListener('pointermove', (e) => {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      ctx.strokeStyle = '#ff2e7a';
      ctx.lineWidth = 2;
      ctx.stroke();
    });

    canvas.addEventListener('pointerup', () => {
      drawing = false;
    });
  </script>  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js')
        .then(() => console.log("Service Worker Registered"));
    }
  </script></body>
</html>
